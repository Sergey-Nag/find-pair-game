(this["webpackJsonpfind-pair-game"]=this["webpackJsonpfind-pair-game"]||[]).push([[0],{31:function(e,a,t){},36:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){},44:function(e,a,t){},45:function(e,a,t){},47:function(e,a,t){"use strict";t.r(a);var c=t(1),r=t.n(c),s=t(16),n=t.n(s),i=(t(31),t(4)),l=t(19),d=t(5),o=t(6),j=(t(36),t(0));var m=function(e){var a=e.children,t=e.clickHandler,c=e.variant,r=e.isCheckbox,s=e.checked,n=e.type;return Object(j.jsxs)("button",{className:"button button__".concat(c),type:n?"submit":"button",onClick:t,children:[r&&Object(j.jsxs)("div",{className:"button__box",children:[Object(j.jsx)("div",{className:"button__checkbox ".concat(s?"active":"")}),a]}),!r&&a]})},b=function(e,a){return"".concat(e<10?"0":"").concat(e,":").concat(a<10?"0":"").concat(a)},u=function(e){return new Date(e).getMinutes()},O=function(e){return new Date(e).getSeconds()},_=function(e,a){var t=new Date;return t.setTime(1e3*a+1e3*e*60),t.valueOf()},v=function(e,a){var t=Object(o.a)(e,2),r=t[0],s=t[1],n=Object(c.useRef)(null),i=Object(c.useState)(!1),l=Object(o.a)(i,2),d=l[0],j=l[1],m=Object(c.useState)(!1),b=Object(o.a)(m,2),u=b[0],O=b[1],v=Object(c.useState)(!1),p=Object(o.a)(v,2),h=p[0],f=p[1],x=Object(c.useState)(!1),g=Object(o.a)(x,2),y=g[0],N=g[1],w=Object(c.useState)(_(r,s)),k=Object(o.a)(w,2),S=k[0],E=k[1],T=Object(c.useState)(S),L=Object(o.a)(T,2),C=L[0],P=L[1],D=Object(c.useState)({paused:null,finished:null}),A=Object(o.a)(D,1)[0];Object(c.useEffect)((function(){O(0===C)}),[C]);var I=function(e){N(!1),j(!0),e&&(E(_(e[0],e[1])),f(!0))},M=Object(c.useCallback)((function(){n.current||(A.beforeStart&&A.beforeStart(),n.current=setInterval((function(){P((function(e){return console.log("tick"),0===e?(I(),0):e-1e3}))}),a))}),[a,A]),q=Object(c.useCallback)((function(){n.current&&(clearInterval(n.current),n.current=null,N(!1),d||!A.paused||u||A.paused())}),[A,d,u]),F=Object(c.useCallback)((function(){P(S)}),[S]);return Object(c.useEffect)((function(){if(h&&(F(),f(!1)),d)return q(),void(A.finished&&u&&A.finished());y?M():q()}),[d,h,y,M,F,A,q,u]),{start:function(){j(!1),N(!0)},pause:function(){return N(!1)},stop:function(){return j(!0)},restart:I,leftTime:C,callbacks:A}},p="game/start",h="game/pause",f="game/gameOver",x="game/setTime",g="player/setNickname",y="player/setTime",N="player/clearScore",w=[2,20];var k=function(){var e,a=Object(i.c)((function(e){return e.player})),t=Object(i.c)((function(e){return e.game})),r=Object(c.useState)("--:--"),s=Object(o.a)(r,2),n=s[0],l=s[1],d=Object(i.b)(),m=v(w,1e3),p=m.start,f=m.pause,g=m.leftTime,N=m.callbacks;return Object(c.useEffect)((function(){N.finished=function(){console.log("finished"),0===g&&d({type:h})},N.paused=function(){console.log("paused")},t.isPlaying?p():f()}),[p,f,N,t.isPlaying,g,d]),Object(c.useEffect)((function(){d({type:x,payload:g}),d({type:y,payload:_.apply(void 0,w)-g})}),[g,d]),Object(c.useEffect)((function(){var e=u(t.time),a=O(t.time);l(b(e,a))}),[t]),Object(j.jsxs)("div",{className:"game__info",children:[Object(j.jsx)("span",{className:"game__nickname",children:null!==(e=a.nickname)&&void 0!==e?e:"..."}),Object(j.jsx)("span",{className:"game__time",children:n})]})},S=t(11);t(38);var E=function(e){var a=e.inGame,t=Object(i.c)((function(e){return e.leaderboard})),r=Object(i.c)((function(e){return e.player})),s=Object(c.useRef)(null),n=Object(c.useCallback)((function(e){var a=u(e),t=O(e);return b(a,t)}),[]),l=Object(c.useCallback)((function(){var e=Object(S.a)(t.list);return a&&e.push({id:"player",nickname:r.nickname,time:r.time}),e.sort((function(e,a){return e.time-a.time}))}),[t.list,a,r]);return Object(c.useEffect)((function(){if(a||!(r.time<1)){var e=s.current.clientHeight,t=s.current.querySelector(".leaderboard__row_player"),c=t.clientHeight,n=t.offsetTop;(function(e,a){var t=e.clientHeight;return e.offsetTop+t>a})(t,e-c)&&s.current.scrollTo(0,n-e+2*c)}}),[a,r]),Object(j.jsxs)("div",{className:"leaderboard",children:[Object(j.jsx)("div",{className:"leaderboard__head",children:Object(j.jsxs)("div",{className:"leaderboard__row",children:[Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"\u2116"}),Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"Nickname"}),Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_header leaderboard__col_text_right",children:"Time"})]})}),Object(j.jsx)("div",{ref:s,className:"leaderboard__body ".concat(a?"":"leaderboard__body_top-players"),children:l().map((function(e){var t=e.id,c=e.nickname,r=e.time;return Object(j.jsxs)("div",{className:"leaderboard__row ".concat(a&&"player"===t?"leaderboard__row_player":""),children:[Object(j.jsx)("div",{className:"leaderboard__col ".concat(a&&"player"===t&&0===r?"leaderboard__col_no-counter":"")}),Object(j.jsx)("div",{className:"leaderboard__col",children:c}),Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_text_right",children:n(r)})]},t)}))})]})},T=(t(39),{easy:{img:t.p+"static/media/easy.448b1a60.svg",time:[1,0],layout:"4x4",rememberTime:[0,10]},medium:{img:t.p+"static/media/medium.57b2e366.svg",time:[2,20],layout:"8x8",rememberTime:[0,30]},hard:{img:t.p+"static/media/hard.b4764cca.svg",time:[3,50],layout:"14x10",rememberTime:[0,50]}});var L=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(i.b)(),t=v(T[e].rememberTime,1e3),r=Object(i.c)((function(e){return e.game})),s=r.time,n=r.isStart,l=Object(c.useState)(0),d=Object(o.a)(l,2),m=d[0],b=d[1];return Object(c.useEffect)((function(){n||(t.start(),t.callbacks.finished=function(){return a({type:p})})}),[n,t,a]),Object(c.useEffect)((function(){if(n){var a=_(2,20);b(100/(a/s))}else{var c=_.apply(void 0,Object(S.a)(T[e].rememberTime));b(100/(c/(c-t.leftTime)))}}),[s,e,n,t]),Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("div",{className:"loader__line ".concat(n?"loader__countdown":""),style:{width:"".concat(m,"%")}})})},C=(t(40),t(41),{android:t.p+"static/media/android.5cea2350.svg",acer:t.p+"static/media/acer.97b43230.svg",apple:t.p+"static/media/apple.e8c87215.svg",beats:t.p+"static/media/beats.338456d2.svg",hp:t.p+"static/media/hp.2435474a.svg",lenovo:t.p+"static/media/lenovo.025f4804.svg",nokia:t.p+"static/media/nokia.4daa5df2.svg",intel:t.p+"static/media/intel.e6451727.svg",dell:t.p+"static/media/dell.39467c58.svg",cisco:t.p+"static/media/cisco.20318700.svg",htc:t.p+"static/media/htc.74cbfad7.svg"});var P=function(e){var a=e.card,t=e.index,c=a.isFlipped,r=a.name;return Object(j.jsxs)("div",{id:"card-".concat(t),className:"card".concat(c?" card_flipped":""),children:[Object(j.jsx)("div",{className:"card__shirt"}),Object(j.jsx)("div",{className:"card__face",style:{backgroundImage:"url(".concat(C[r],")")}}),Object(j.jsx)("div",{className:"card__shadow"})]})},D="cards/pushData",A="cards/addToCompare",I="cards/flipCard";var M=function(e){var a=e.level,t=Object(i.c)((function(e){return e.cards})),r=Object(c.useRef)(null),s=Object(i.b)();return Object(c.useEffect)((function(){var e=r.current,a=function(e){var a=e.target.closest(".card");if(a){var t,c=a.id.split("-")[1];s((t=c,{type:I,payload:function(e){var a=Object(S.a)(e);return a[t].isFlipped=!a[t].isFlipped,a}}))}};return e.addEventListener("click",a),function(){return e.removeEventListener("click",a)}}),[s]),Object(j.jsx)("div",{className:"playground playground__level_".concat(a),ref:r,children:t.list.map((function(e,a){return Object(j.jsx)(P,{index:a,card:e},e.id)}))})};t(42),t(43);var q=function(){return Object(j.jsxs)("div",{className:"modal__wrapper",children:[Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("h4",{className:"modal__title",children:"Rules"}),Object(j.jsxs)("ol",{className:"modal__list",children:[Object(j.jsx)("li",{className:"modal__item",children:"Enter your nickname and start game. It will be used for saving your results."}),Object(j.jsx)("li",{className:"modal__item",children:"You have N seconds to remember all cards, before they are all roll over."}),Object(j.jsx)("li",{className:"modal__item",children:"When the timer starts counting down, you need to find all pairs of the same cards."}),Object(j.jsx)("li",{className:"modal__item",children:"The game ends when the time is up. Your time will be saved on the leaderboard."})]})]}),Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("h4",{className:"modal__title",children:"Nickname"}),Object(j.jsxs)("form",{className:"modal__form",children:[Object(j.jsx)("input",{className:"modal__input",placeholder:"Enter your nickname"}),Object(j.jsxs)("div",{className:"modal__button-wrapper",children:[Object(j.jsx)(m,{variant:"secondary",children:"Cancel"}),Object(j.jsx)(m,{variant:"primary",children:"Continue"})]})]})]})]})},F=t.p+"static/media/game-over.910289ec.svg";var H=function(e){var a=e.score;return Object(j.jsxs)("div",{className:"modal__wrapper",children:[Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("img",{className:"modal__image",src:F,alt:"game-over"}),Object(j.jsxs)("p",{className:"modal__content",children:["Your score:"," ",Object(j.jsx)("span",{className:"modal__score",children:a})]})]}),Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("p",{className:"modal__text",children:"Let's play again?"}),Object(j.jsxs)("div",{className:"modal__button-wrapper",children:[Object(j.jsx)(m,{variant:"secondary",children:"Back"}),Object(j.jsx)(m,{variant:"primary",children:"Play"})]})]})]})};var R=function(){return Object(j.jsx)("div",{className:"modal__wrapper",children:Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("p",{className:"modal__text",children:"Are you sure you want to quit the game?"}),Object(j.jsxs)("div",{className:"modal__button-wrapper",children:[Object(j.jsx)(m,{variant:"danger",children:"Quit"}),Object(j.jsx)(m,{variant:"primary",children:"Continue"})]})]})})};function G(){var e=document.querySelector(".modal__pause-item"),a=document.querySelector(".modal__pause");e.style.display="block",a.classList.add("active")}function X(){var e=document.querySelector(".modal__pause-item"),a=document.querySelector(".modal__pause");e.style.display="none",a.classList.remove("active")}var B=function(){return Object(j.jsx)("div",{className:"modal__wrapper",children:Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("div",{className:"modal__pause",onMouseOver:G,onMouseOut:X,onBlur:!0,onFocus:!0,children:Object(j.jsx)("span",{className:"modal__pause-item"})}),Object(j.jsxs)("p",{className:"modal__content",children:["Press"," ",Object(j.jsx)("div",{className:"modal__escape-wr",children:Object(j.jsx)("div",{className:"modal__escape",children:Object(j.jsx)("span",{className:"modal__text",children:"Esc"})})})," ","to continue"]})]})})};var U=function(e){var a=e.isLogin,t=e.isCancel,c=e.isGameOver,r=e.isPause,s=e.score;return a?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(q,{})}):t?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(R,{})}):c?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(H,{score:s})}):r?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(B,{})}):void 0};var Y=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(i.b)(),t=Object(c.useState)(!1),r=Object(o.a)(t,2),s=r[0],n=r[1];return Object(c.useEffect)((function(){a({type:s?p:h}),a({type:g,payload:"Sergey"})}),[a,s]),console.log("render"),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(U,{isLogin:!0}),Object(j.jsxs)("div",{className:"game",children:[Object(j.jsxs)("div",{className:"game__interface",children:[Object(j.jsx)(k,{}),Object(j.jsx)("div",{className:"game__leaderboard",children:Object(j.jsx)(E,{inGame:!0})}),Object(j.jsx)("div",{className:"game__button",children:Object(j.jsx)(m,{variant:"danger",clickHandler:function(){return n(!s)},children:"Surrender"})})]}),Object(j.jsx)("div",{className:"game__playground",children:Object(j.jsx)(M,{level:e})}),Object(j.jsx)("div",{className:"game__loader",children:Object(j.jsx)(L,{width:"50"})})]})]})},J=t(2);t(44);var V=function(e){var a=e.level,t=e.active,r=e.onActive,s=Object(c.useState)({}),n=Object(o.a)(s,2),i=n[0],l=n[1];return Object(c.useEffect)((function(){l(Object(J.a)({},T[a]))}),[a,l]),Object(j.jsxs)("div",{className:"gamelevel",children:[Object(j.jsx)("div",{className:"gamelevel__image_wrapp",children:Object(j.jsx)("img",{className:"gamelevel__image".concat(t?" gamelevel__image_active":""),src:i.img,alt:a})}),Object(j.jsx)("div",{className:"gamelevel__info_wrapp",children:Object(j.jsxs)("h3",{className:"gamelevel__info",children:[Object(j.jsx)("span",{className:"gamelevel__name",children:a}),Object(j.jsx)("span",{className:"gamelevel__time",children:i.time})]})}),Object(j.jsx)("div",{className:"gamelevel__button_wrapp",children:Object(j.jsx)(m,{isCheckbox:!0,variant:"primary",checked:t,clickHandler:function(){return r(a)},children:i.layout})})]})},z=(t(45),"gamemode/change");var Q=function(){var e=Object(i.c)((function(e){return e.leaderboard})),a=Object(i.c)((function(e){return e.gamemode})),t=Object(i.b)(),r=Object(c.useCallback)((function(e){t({type:z,payload:e})}),[t]);return Object(j.jsxs)("div",{className:"homepage",children:[Object(j.jsxs)("div",{className:"homepage__leaderboard-wrapper",children:[Object(j.jsx)("h1",{className:"homepage__title",children:"Leaderboard"}),Object(j.jsx)(E,{leaders:e.list})]}),Object(j.jsx)("h3",{className:"homepage__subtitle",children:"Select the grid size"}),Object(j.jsxs)("div",{className:"homepage__level-wrapper",children:[Object(j.jsx)(V,{level:"easy",active:"easy"===a,onActive:r}),Object(j.jsx)(V,{level:"medium",active:"medium"===a,onActive:r}),Object(j.jsx)(V,{level:"hard",active:"hard"===a,onActive:r})]}),Object(j.jsx)("div",{className:"homepage__button-wrapper",children:Object(j.jsx)(l.b,{to:"/game",children:Object(j.jsx)(m,{variant:"large",children:"Play"})})})]})};var W=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(l.a,{basename:"/find-pair-game",children:Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{exact:!0,path:"/",children:Object(j.jsx)(Q,{})}),Object(j.jsx)(d.a,{exact:!0,path:"/game",children:Object(j.jsx)(Y,{})})]})})})},K=t(13),Z="leaderboard/loading",$="leaderboard/loaded",ee="leaderboard/error",ae="leaderboard/clearError",te="leaderboard/pushData",ce={list:Object(S.a)(new Array(50)).map((function(e,a){return{id:a,nickname:"Username ".concat(a),time:3e3+1e3*a}})),isLoading:!1,isLoaded:!1,isError:!1,errorMessage:null};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Z:return Object(J.a)(Object(J.a)({},e),{},{isLoading:!0,isLoaded:!1});case $:return Object(J.a)(Object(J.a)({},e),{},{isLoading:!1,isLoaded:!0});case ee:return Object(J.a)(Object(J.a)({},e),{},{isError:!0,errorMessage:a.payload});case ae:return Object(J.a)(Object(J.a)({},e),{},{isError:!1,errorMessage:null});case te:return Object(J.a)(Object(J.a)({},e),{},{list:a.payload});default:return e}};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"easy",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case z:return a.payload;default:return e}},ne={compare:[],list:Object(S.a)(new Array(16)).map((function(e,a){return{id:a,name:"apple",isFlipped:!1}}))};var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case D:return Object(J.a)(Object(J.a)({},e),{},{list:a.payload});case I:return Object(J.a)(Object(J.a)({},e),{},{list:a.payload(e.list)});case A:return Object(J.a)(Object(J.a)({},e),{},{compare:Object(S.a)(a.payload(e.compare))});default:return e}},le={nickname:null,time:null};var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case g:return Object(J.a)(Object(J.a)({},e),{},{nickname:a.payload});case y:return Object(J.a)(Object(J.a)({},e),{},{time:a.payload});case N:return Object(J.a)(Object(J.a)({},e),{},{time:null});default:return e}},oe={isStart:!1,isPlaying:!1,isPause:!1,isGameOver:!1,time:null};var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,a=arguments.length>1?arguments[1]:void 0,t=a.type,c=a.payload;switch(t){case p:return Object(J.a)(Object(J.a)({},e),{},{isStart:!0,isPlaying:!0,isPause:!1});case h:return Object(J.a)(Object(J.a)({},e),{},{isPlaying:!1,isPause:!0});case f:return Object(J.a)(Object(J.a)({},e),{},{isStart:!1,isGameOver:!0,isPlaying:!1});case x:return Object(J.a)(Object(J.a)({},e),{},{time:c});default:return e}},me=Object(K.b)({player:de,gamemode:se,leaderboard:re,cards:ie,game:je}),be=Object(K.c)(me,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());n.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(i.a,{store:be,children:Object(j.jsx)(W,{})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.8d966800.chunk.js.map