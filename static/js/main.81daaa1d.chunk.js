(this["webpackJsonpfind-pair-game"]=this["webpackJsonpfind-pair-game"]||[]).push([[0],{31:function(e,a,t){},36:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){},45:function(e,a,t){},46:function(e,a,t){},47:function(e,a,t){"use strict";t.r(a);var c=t(1),r=t.n(c),n=t(17),s=t.n(n),i=(t(31),t(4)),l=t(14),d=t(6),o=(t(36),t(0));var j=function(e){var a=e.children,t=e.clickHandler,c=e.variant,r=e.isCheckbox,n=e.checked,s=e.type;return Object(o.jsxs)("button",{className:"button button__".concat(c),type:s?"submit":"button",onClick:t,children:[r&&Object(o.jsxs)("div",{className:"button__box",children:[Object(o.jsx)("div",{className:"button__checkbox ".concat(n?"active":"")}),a]}),!r&&a]})},m=t(7),b=t(5),u=function(e,a){return"".concat(e<10?"0":"").concat(e,":").concat(a<10?"0":"").concat(a)},O=function(e){return new Date(e).getMinutes()},v=function(e){return new Date(e).getSeconds()},_=function(e,a){var t=new Date;return t.setTime(1e3*a+1e3*e*60),t.valueOf()},p=function(e,a){var t=Object(b.a)(e,2),r=t[0],n=t[1],s=Object(c.useRef)(null),i=Object(c.useState)(!1),l=Object(b.a)(i,2),d=l[0],o=l[1],j=Object(c.useState)(!1),m=Object(b.a)(j,2),u=m[0],O=m[1],v=Object(c.useState)(!1),p=Object(b.a)(v,2),h=p[0],f=p[1],g=Object(c.useState)(!1),x=Object(b.a)(g,2),y=x[0],N=x[1],k=Object(c.useState)(_(r,n)),w=Object(b.a)(k,2),S=w[0],E=w[1],T=Object(c.useState)(S),C=Object(b.a)(T,2),L=C[0],P=C[1],R=Object(c.useState)({paused:null,finished:null}),D=Object(b.a)(R,1)[0];Object(c.useEffect)((function(){O(0===L)}),[L]);var A=function(e){N(!1),o(!0),e&&(E(_(e[0],e[1])),f(!0))},q=Object(c.useCallback)((function(){s.current||(D.beforeStart&&D.beforeStart(),s.current=setInterval((function(){P((function(e){return 0===e?(A(),0):e-1e3}))}),a))}),[a,D]),I=Object(c.useCallback)((function(){s.current&&(clearInterval(s.current),s.current=null,N(!1),d||!D.paused||u||D.paused())}),[D,d,u]),M=Object(c.useCallback)((function(){P(S)}),[S]);return Object(c.useEffect)((function(){return h&&(M(),f(!1)),d?(I(),D.finished&&u&&D.finished(),!1):(y?q():I(),function(){return I()})}),[d,h,y,q,M,D,I,u]),{start:function(){o(!1),N(!0)},pause:function(){return N(!1)},stop:function(){return o(!0)},restart:A,leftTime:L,callbacks:D}},h="game/start",f="game/pause",g="game/gameOver",x="game/setTime",y="game/startRemember",N="player/setNickname",k="player/setTime",w="player/clearScore",S={easy:{img:t.p+"static/media/easy.448b1a60.svg",time:[1,0],layout:"4x4",rememberTime:[0,10]},medium:{img:t.p+"static/media/medium.57b2e366.svg",time:[2,20],layout:"8x8",rememberTime:[0,30]},hard:{img:t.p+"static/media/hard.b4764cca.svg",time:[3,50],layout:"14x10",rememberTime:[0,50]}};var E=function(){var e,a=Object(i.c)((function(e){return e.player})),t=Object(i.c)((function(e){return e.game})),r=Object(c.useState)("--:--"),n=Object(b.a)(r,2),s=n[0],l=n[1],d=Object(i.c)((function(e){return e.gamemode})),j=Object(i.b)(),h=p(S[d].time,1e3),f=h.start,y=h.pause,N=h.leftTime,w=h.callbacks;return Object(c.useEffect)((function(){w.finished=function(){console.log("finished"),0===N&&j({type:g})},w.paused=function(){console.log("paused")},t.isPlaying?f():y()}),[f,y,w,t.isPlaying,N,j]),Object(c.useEffect)((function(){j({type:x,payload:N}),j({type:k,payload:_.apply(void 0,Object(m.a)(S[d].time))-N})}),[N,j,d]),Object(c.useEffect)((function(){var e=O(t.time),a=v(t.time);l(u(e,a))}),[t]),Object(o.jsxs)("div",{className:"game__info",children:[Object(o.jsx)("span",{className:"game__nickname",children:null!==(e=a.nickname)&&void 0!==e?e:"..."}),Object(o.jsx)("span",{className:"game__time",children:s})]})};t(38);var T=function(e){var a=e.inGame,t=Object(i.c)((function(e){return e.leaderboard})),r=Object(i.c)((function(e){return e.player})),n=Object(c.useRef)(null),s=Object(c.useCallback)((function(e){var a=O(e),t=v(e);return u(a,t)}),[]),l=Object(c.useCallback)((function(){var e=Object(m.a)(t.list);return a&&e.push({id:"player",nickname:r.nickname,time:r.time}),e.sort((function(e,a){return e.time-a.time}))}),[t.list,a,r]);return Object(c.useEffect)((function(){if(a){var e=n.current.clientHeight,t=n.current.querySelector(".leaderboard__row_player"),c=t.clientHeight,r=t.offsetTop;(function(e,a){var t=e.clientHeight;return e.offsetTop+t>a})(t,e-c)&&n.current.scrollTo(0,r-e+2*c)}}),[a,r]),Object(o.jsxs)("div",{className:"leaderboard",children:[Object(o.jsx)("div",{className:"leaderboard__head",children:Object(o.jsxs)("div",{className:"leaderboard__row",children:[Object(o.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"\u2116"}),Object(o.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"Nickname"}),Object(o.jsx)("div",{className:"leaderboard__col leaderboard__col_header leaderboard__col_text_right",children:"Time"})]})}),Object(o.jsx)("div",{ref:n,className:"leaderboard__body ".concat(a?"":"leaderboard__body_top-players"),children:l().map((function(e){var t=e.id,c=e.nickname,r=e.time;return Object(o.jsxs)("div",{className:"leaderboard__row ".concat(a&&"player"===t?"leaderboard__row_player":""),children:[Object(o.jsx)("div",{className:"leaderboard__col ".concat(a&&"player"===t&&0===r?"leaderboard__col_no-counter":"")}),Object(o.jsx)("div",{className:"leaderboard__col",children:c}),Object(o.jsx)("div",{className:"leaderboard__col leaderboard__col_text_right",children:s(r)})]},t)}))})]})};t(39);var C=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(i.b)(),t=p(S[e].rememberTime,1e3),r=Object(i.c)((function(e){return e.game})),n=r.time,s=r.isPlaying,l=r.isRememberTime,d=Object(c.useState)(0),j=Object(b.a)(d,2),u=j[0],O=j[1];return Object(c.useEffect)((function(){l&&(t.start(),t.callbacks.finished=function(){return a({type:h})})}),[l,t,a]),Object(c.useEffect)((function(){if(s){var a=_.apply(void 0,Object(m.a)(S[e].time));O(100/(a/n))}else if(l){var c=_.apply(void 0,Object(m.a)(S[e].rememberTime));O(100/(c/(c-t.leftTime)))}}),[n,e,s,l,t]),Object(o.jsx)("div",{className:"loader",children:Object(o.jsx)("div",{className:"loader__line ".concat(s?"loader__countdown":""),style:{width:"".concat(u,"%")}})})},L=(t(40),t(41),{android:t.p+"static/media/android.5cea2350.svg",acer:t.p+"static/media/acer.97b43230.svg",apple:t.p+"static/media/apple.e8c87215.svg",beats:t.p+"static/media/beats.338456d2.svg",hp:t.p+"static/media/hp.2435474a.svg",lenovo:t.p+"static/media/lenovo.025f4804.svg",nokia:t.p+"static/media/nokia.4daa5df2.svg",intel:t.p+"static/media/intel.e6451727.svg",dell:t.p+"static/media/dell.39467c58.svg",cisco:t.p+"static/media/cisco.20318700.svg",htc:t.p+"static/media/htc.74cbfad7.svg"});var P=function(e){var a=e.card,t=e.index,c=a.isFlipped,r=a.name;return Object(o.jsxs)("div",{id:"card-".concat(t),className:"card".concat(c?" card_flipped":""),children:[Object(o.jsx)("div",{className:"card__shirt"}),Object(o.jsx)("div",{className:"card__face",style:{backgroundImage:"url(".concat(L[r],")")}}),Object(o.jsx)("div",{className:"card__shadow"})]})},R="cards/pushData",D="cards/addToCompare",A="cards/flipCard";var q=function(e){var a=e.level,t=Object(i.c)((function(e){return e.cards})),r=Object(c.useRef)(null),n=Object(i.b)();return Object(c.useEffect)((function(){var e=r.current,a=function(e){var a=e.target.closest(".card");if(a){var t,c=a.id.split("-")[1];n((t=c,{type:A,payload:function(e){var a=Object(m.a)(e);return a[t].isFlipped=!a[t].isFlipped,a}}))}};return e.addEventListener("click",a),function(){return e.removeEventListener("click",a)}}),[n]),Object(o.jsx)("div",{className:"playground playground__level_".concat(a),ref:r,children:t.list.map((function(e,a){return Object(o.jsx)(P,{index:a,card:e},e.id)}))})},I=(t(42),t(43),function(e){var a=Object(c.useState)(!1),t=Object(b.a)(a,2),r=t[0],n=t[1],s=Object(c.useState)(null),i=Object(b.a)(s,2),l=i[0],d=i[1];return Object(c.useEffect)((function(){var a=function(e){return{isCorrectlength:function(){return e.length>2&&e.length<20},isCorrectSymbol:function(){return/^[a-zA-Z0-9-._]*$/g.test(e)},isNotEmpty:function(){return""!==e.trim()}}}(e),t=a.isCorrectlength,c=a.isCorrectSymbol;return(0,a.isNotEmpty)()?(n(!0),t()?(n(!0),void(c()?n(!0):(d("Nicnkame contains not valid symbols"),n(!1)))):(d("Required length of nickname is 3-19 symbols"),void n(!1))):(d("Nickname is required"),void n(!1))}),[e]),{isValid:r,tip:l}});var M=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(c.useState)(""),t=Object(b.a)(a,2),r=t[0],n=t[1],s=Object(c.useState)(0),d=Object(b.a)(s,2),m=d[0],u=d[1],O=Object(c.useState)(!1),_=Object(b.a)(O,2),p=_[0],h=_[1],f=I(r.trim()),g=f.isValid,x=f.tip,k=Object(i.b)(),w=Object(c.useCallback)((function(e){e.preventDefault(),h(!0),g&&(k({type:N,payload:r.trim()}),k({type:y}))}),[k,g,r]);return Object(c.useEffect)((function(){var a=1e3*S[e].rememberTime[1],t=v(a);u(t)}),[e]),Object(o.jsxs)("div",{className:"modal__wrapper",children:[Object(o.jsxs)("div",{className:"modal__container",children:[Object(o.jsx)("h4",{className:"modal__title",children:"Rules"}),Object(o.jsxs)("ol",{className:"modal__list",children:[Object(o.jsx)("li",{className:"modal__item",children:"Enter your nickname and start game. It will be used for saving your results."}),Object(o.jsxs)("li",{className:"modal__item",children:["You have"," ",Object(o.jsx)("b",{children:m})," ","seconds to remember all cards, before they are all roll over."]}),Object(o.jsx)("li",{className:"modal__item",children:"When the timer starts counting down, you need to find all pairs of the same cards."}),Object(o.jsx)("li",{className:"modal__item",children:"The game ends when the time is up. Your time will be saved on the leaderboard."})]})]}),Object(o.jsxs)("div",{className:"modal__container",children:[Object(o.jsx)("h4",{className:"modal__title",children:"Nickname"}),Object(o.jsxs)("form",{className:"modal__form",onSubmit:w,children:[Object(o.jsx)("input",{className:"modal__input".concat(p&&!g?" modal__input_invalid":""),placeholder:"Enter your nickname",value:r,onChange:function(e){var a=e.target;return n(a.value)},spellCheck:"false"}),Object(o.jsxs)("div",{className:"modal__button-wrapper",children:[Object(o.jsx)(l.b,{to:"/",children:Object(o.jsx)(j,{variant:"secondary",children:"Cancel"})}),Object(o.jsx)(j,{variant:"primary",type:"submit",children:"Continue"})]})]}),p&&!g&&Object(o.jsx)("div",{className:"modal__container modal__container_absolute",children:Object(o.jsx)("p",{children:x})})]})]})},F=t.p+"static/media/game-over.910289ec.svg";var G=function(e){var a=e.score;return Object(o.jsxs)("div",{className:"modal__wrapper",children:[Object(o.jsxs)("div",{className:"modal__container",children:[Object(o.jsx)("img",{className:"modal__image",src:F,alt:"game-over"}),Object(o.jsxs)("p",{className:"modal__content",children:["Your score:"," ",Object(o.jsx)("span",{className:"modal__score",children:a})]})]}),Object(o.jsxs)("div",{className:"modal__container",children:[Object(o.jsx)("p",{className:"modal__text",children:"Let's play again?"}),Object(o.jsxs)("div",{className:"modal__button-wrapper",children:[Object(o.jsx)(j,{variant:"secondary",children:"Back"}),Object(o.jsx)(j,{variant:"primary",children:"Play"})]})]})]})};var H=function(){return Object(o.jsx)("div",{className:"modal__wrapper",children:Object(o.jsxs)("div",{className:"modal__container",children:[Object(o.jsx)("p",{className:"modal__text",children:"Are you sure you want to quit the game?"}),Object(o.jsxs)("div",{className:"modal__button-wrapper",children:[Object(o.jsx)(j,{variant:"danger",children:"Quit"}),Object(o.jsx)(j,{variant:"primary",children:"Continue"})]})]})})};function V(){var e=document.querySelector(".modal__pause-item"),a=document.querySelector(".modal__pause");e.style.display="block",a.classList.add("active")}function X(){var e=document.querySelector(".modal__pause-item"),a=document.querySelector(".modal__pause");e.style.display="none",a.classList.remove("active")}var B=function(){return Object(o.jsx)("div",{className:"modal__wrapper",children:Object(o.jsxs)("div",{className:"modal__container",children:[Object(o.jsx)("div",{className:"modal__pause",onMouseOver:V,onMouseOut:X,onBlur:!0,onFocus:!0,children:Object(o.jsx)("span",{className:"modal__pause-item"})}),Object(o.jsxs)("p",{className:"modal__content",children:["Press"," ",Object(o.jsx)("div",{className:"modal__escape-wr",children:Object(o.jsx)("div",{className:"modal__escape",children:Object(o.jsx)("span",{className:"modal__text",children:"Esc"})})})," ","to continue"]})]})})};var U=function(e){var a=e.isLogin,t=e.isCancel,c=e.isGameOver,r=e.isPause,n=e.score;return a?Object(o.jsx)("div",{className:"modal",children:Object(o.jsx)(M,{})}):t?Object(o.jsx)("div",{className:"modal",children:Object(o.jsx)(H,{})}):c?Object(o.jsx)("div",{className:"modal",children:Object(o.jsx)(G,{score:n})}):r?Object(o.jsx)("div",{className:"modal",children:Object(o.jsx)(B,{})}):void 0};var Y=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(i.c)((function(e){return e.game.isStart}));return console.log("render"),Object(o.jsxs)(o.Fragment,{children:[!a&&Object(o.jsx)(U,{isLogin:!0}),Object(o.jsxs)("div",{className:"game",children:[Object(o.jsxs)("div",{className:"game__interface",children:[Object(o.jsx)(E,{}),Object(o.jsx)("div",{className:"game__leaderboard",children:Object(o.jsx)(T,{inGame:!0})}),Object(o.jsx)("div",{className:"game__button",children:Object(o.jsx)(j,{variant:"danger",children:"Surrender"})})]}),Object(o.jsx)("div",{className:"game__playground",children:Object(o.jsx)(q,{level:e})}),Object(o.jsx)("div",{className:"game__loader",children:Object(o.jsx)(C,{})})]})]})},z=t(2);t(45);var J=function(e){var a=e.level,t=e.active,r=e.onActive,n=Object(c.useState)({}),s=Object(b.a)(n,2),i=s[0],l=s[1],d=Object(c.useState)(""),O=Object(b.a)(d,2),v=O[0],_=O[1];return Object(c.useEffect)((function(){l(Object(z.a)({},S[a])),_(i.time?u.apply(void 0,Object(m.a)(i.time)):"")}),[a,i.time,l]),Object(o.jsxs)("div",{className:"gamelevel",children:[Object(o.jsx)("div",{className:"gamelevel__image_wrapp",children:Object(o.jsx)("img",{className:"gamelevel__image".concat(t?" gamelevel__image_active":""),src:i.img,alt:a})}),Object(o.jsx)("div",{className:"gamelevel__info_wrapp",children:Object(o.jsxs)("h3",{className:"gamelevel__info",children:[Object(o.jsx)("span",{className:"gamelevel__name",children:a}),Object(o.jsx)("span",{className:"gamelevel__time",children:v})]})}),Object(o.jsx)("div",{className:"gamelevel__button_wrapp",children:Object(o.jsx)(j,{isCheckbox:!0,variant:"primary",checked:t,clickHandler:function(){return r(a)},children:i.layout})})]})},Q=(t(46),"gamemode/change");var W=function(){var e=Object(i.c)((function(e){return e.leaderboard})),a=Object(i.c)((function(e){return e.gamemode})),t=Object(i.b)(),r=Object(c.useCallback)((function(e){t({type:Q,payload:e})}),[t]);return Object(c.useEffect)((function(){t({type:w})}),[t]),Object(o.jsxs)("div",{className:"homepage",children:[Object(o.jsxs)("div",{className:"homepage__leaderboard-wrapper",children:[Object(o.jsx)("h1",{className:"homepage__title",children:"Leaderboard"}),Object(o.jsx)(T,{leaders:e.list,inGame:!1})]}),Object(o.jsx)("h3",{className:"homepage__subtitle",children:"Select the grid size"}),Object(o.jsxs)("div",{className:"homepage__level-wrapper",children:[Object(o.jsx)(J,{level:"easy",active:"easy"===a,onActive:r}),Object(o.jsx)(J,{level:"medium",active:"medium"===a,onActive:r}),Object(o.jsx)(J,{level:"hard",active:"hard"===a,onActive:r})]}),Object(o.jsx)("div",{className:"homepage__button-wrapper",children:Object(o.jsx)(l.b,{to:"/game",children:Object(o.jsx)(j,{variant:"large",children:"Play"})})})]})};var Z=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(l.a,{basename:"/find-pair-game",children:Object(o.jsxs)(d.c,{children:[Object(o.jsx)(d.a,{exact:!0,path:"/",children:Object(o.jsx)(W,{})}),Object(o.jsx)(d.a,{exact:!0,path:"/game",children:Object(o.jsx)(Y,{})})]})})})},$=t(13),K="leaderboard/loading",ee="leaderboard/loaded",ae="leaderboard/error",te="leaderboard/clearError",ce="leaderboard/pushData",re={list:Object(m.a)(new Array(50)).map((function(e,a){return{id:a,nickname:"Username ".concat(a),time:3e3+1e3*a}})),isLoading:!1,isLoaded:!1,isError:!1,errorMessage:null};var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case K:return Object(z.a)(Object(z.a)({},e),{},{isLoading:!0,isLoaded:!1});case ee:return Object(z.a)(Object(z.a)({},e),{},{isLoading:!1,isLoaded:!0});case ae:return Object(z.a)(Object(z.a)({},e),{},{isError:!0,errorMessage:a.payload});case te:return Object(z.a)(Object(z.a)({},e),{},{isError:!1,errorMessage:null});case ce:return Object(z.a)(Object(z.a)({},e),{},{list:a.payload});default:return e}};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"easy",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Q:return a.payload;default:return e}},ie={compare:[],list:Object(m.a)(new Array(16)).map((function(e,a){return{id:a,name:"apple",isFlipped:!1}}))};var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case R:return Object(z.a)(Object(z.a)({},e),{},{list:a.payload});case A:return Object(z.a)(Object(z.a)({},e),{},{list:a.payload(e.list)});case D:return Object(z.a)(Object(z.a)({},e),{},{compare:Object(m.a)(a.payload(e.compare))});default:return e}},de={nickname:null,time:null};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case N:return Object(z.a)(Object(z.a)({},e),{},{nickname:a.payload});case k:return Object(z.a)(Object(z.a)({},e),{},{time:a.payload});case w:return Object(z.a)(Object(z.a)({},e),{},{time:null});default:return e}},je={isRememberTime:!1,isStart:!1,isPlaying:!1,isPause:!1,isGameOver:!1,time:null};var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,a=arguments.length>1?arguments[1]:void 0,t=a.type,c=a.payload;switch(t){case y:return Object(z.a)(Object(z.a)({},e),{},{isRememberTime:!0,isStart:!0});case h:return Object(z.a)(Object(z.a)({},e),{},{isPlaying:!0,isPause:!1,isRememberTime:!1});case f:return Object(z.a)(Object(z.a)({},e),{},{isPlaying:!1,isPause:!0});case g:return Object(z.a)(Object(z.a)({},e),{},{isStart:!1,isGameOver:!0,isPlaying:!1});case x:return Object(z.a)(Object(z.a)({},e),{},{time:c});default:return e}},be=Object($.b)({player:oe,gamemode:se,leaderboard:ne,cards:le,game:me}),ue=Object($.c)(be,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(i.a,{store:ue,children:Object(o.jsx)(Z,{})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.81daaa1d.chunk.js.map