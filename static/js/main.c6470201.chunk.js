(this["webpackJsonpfind-pair-game"]=this["webpackJsonpfind-pair-game"]||[]).push([[0],{31:function(e,a,t){},36:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){},45:function(e,a,t){},46:function(e,a,t){},47:function(e,a,t){"use strict";t.r(a);var c=t(1),r=t.n(c),n=t(17),s=t.n(n),i=(t(31),t(4)),l=t(14),o=t(6),d=t(5),j=(t(36),t(0));var m=function(e){var a=e.children,t=e.clickHandler,c=e.variant,r=e.isCheckbox,n=e.checked,s=e.type;return Object(j.jsxs)("button",{className:"button button__".concat(c),type:s?"submit":"button",onClick:t,children:[r&&Object(j.jsxs)("div",{className:"button__box",children:[Object(j.jsx)("div",{className:"button__checkbox ".concat(n?"active":"")}),a]}),!r&&a]})},b=function(e,a){return"".concat(e<10?"0":"").concat(e,":").concat(a<10?"0":"").concat(a)},u=function(e){return new Date(e).getMinutes()},O=function(e){return new Date(e).getSeconds()},_=function(e,a){var t=new Date;return t.setTime(1e3*a+1e3*e*60),t.valueOf()},v=function(e){return{isCorrectlength:function(){return e.length>2&&e.length<20},isCorrectSymbol:function(){return!/(')|(")|(`)|(\/)|(\\)|(:)|(;)|(~)|({)|(})|(\()|(\))|(\[)|(\])|(\|)|(,)|(\*)/g.test(e)},isNotEmpty:function(){return""!==e.trim()}}},p=function(e,a){var t=Object(d.a)(e,2),r=t[0],n=t[1],s=Object(c.useRef)(null),i=Object(c.useState)(!1),l=Object(d.a)(i,2),o=l[0],j=l[1],m=Object(c.useState)(!1),b=Object(d.a)(m,2),u=b[0],O=b[1],v=Object(c.useState)(!1),p=Object(d.a)(v,2),h=p[0],f=p[1],g=Object(c.useState)(!1),x=Object(d.a)(g,2),y=x[0],N=x[1],k=Object(c.useState)(_(r,n)),S=Object(d.a)(k,2),w=S[0],E=S[1],C=Object(c.useState)(w),T=Object(d.a)(C,2),L=T[0],P=T[1],D=Object(c.useState)({paused:null,finished:null}),A=Object(d.a)(D,1)[0];Object(c.useEffect)((function(){O(0===L)}),[L]);var I=function(e){N(!1),j(!0),e&&(E(_(e[0],e[1])),f(!0))},R=Object(c.useCallback)((function(){s.current||(A.beforeStart&&A.beforeStart(),s.current=setInterval((function(){P((function(e){return console.log("tick"),0===e?(I(),0):e-1e3}))}),a))}),[a,A]),q=Object(c.useCallback)((function(){s.current&&(clearInterval(s.current),s.current=null,N(!1),o||!A.paused||u||A.paused())}),[A,o,u]),M=Object(c.useCallback)((function(){P(w)}),[w]);return Object(c.useEffect)((function(){return h&&(M(),f(!1)),o?(q(),A.finished&&u&&A.finished(),!1):(y?R():q(),function(){return q()})}),[o,h,y,R,M,A,q,u]),{start:function(){j(!1),N(!0)},pause:function(){return N(!1)},stop:function(){return j(!0)},restart:I,leftTime:L,callbacks:A}},h="game/start",f="game/pause",g="game/gameOver",x="game/setTime",y="game/startRemember",N="player/setNickname",k="player/setTime",S="player/clearScore",w=[2,20];var E=function(){var e,a=Object(i.c)((function(e){return e.player})),t=Object(i.c)((function(e){return e.game})),r=Object(c.useState)("--:--"),n=Object(d.a)(r,2),s=n[0],l=n[1],o=Object(i.b)(),m=p(w,1e3),v=m.start,h=m.pause,g=m.leftTime,y=m.callbacks;return Object(c.useEffect)((function(){y.finished=function(){console.log("finished"),0===g&&o({type:f})},y.paused=function(){console.log("paused")},t.isPlaying?v():h()}),[v,h,y,t.isPlaying,g,o]),Object(c.useEffect)((function(){o({type:x,payload:g}),o({type:k,payload:_.apply(void 0,w)-g})}),[g,o]),Object(c.useEffect)((function(){var e=u(t.time),a=O(t.time);l(b(e,a))}),[t]),Object(j.jsxs)("div",{className:"game__info",children:[Object(j.jsx)("span",{className:"game__nickname",children:null!==(e=a.nickname)&&void 0!==e?e:"..."}),Object(j.jsx)("span",{className:"game__time",children:s})]})},C=t(8);t(38);var T=function(e){var a=e.inGame,t=Object(i.c)((function(e){return e.leaderboard})),r=Object(i.c)((function(e){return e.player})),n=Object(c.useRef)(null),s=Object(c.useCallback)((function(e){var a=u(e),t=O(e);return b(a,t)}),[]),l=Object(c.useCallback)((function(){var e=Object(C.a)(t.list);return a&&e.push({id:"player",nickname:r.nickname,time:r.time}),e.sort((function(e,a){return e.time-a.time}))}),[t.list,a,r]);return Object(c.useEffect)((function(){if(a){var e=n.current.clientHeight,t=n.current.querySelector(".leaderboard__row_player"),c=t.clientHeight,r=t.offsetTop;(function(e,a){var t=e.clientHeight;return e.offsetTop+t>a})(t,e-c)&&n.current.scrollTo(0,r-e+2*c)}}),[a,r]),Object(j.jsxs)("div",{className:"leaderboard",children:[Object(j.jsx)("div",{className:"leaderboard__head",children:Object(j.jsxs)("div",{className:"leaderboard__row",children:[Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"\u2116"}),Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"Nickname"}),Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_header leaderboard__col_text_right",children:"Time"})]})}),Object(j.jsx)("div",{ref:n,className:"leaderboard__body ".concat(a?"":"leaderboard__body_top-players"),children:l().map((function(e){var t=e.id,c=e.nickname,r=e.time;return Object(j.jsxs)("div",{className:"leaderboard__row ".concat(a&&"player"===t?"leaderboard__row_player":""),children:[Object(j.jsx)("div",{className:"leaderboard__col ".concat(a&&"player"===t&&0===r?"leaderboard__col_no-counter":"")}),Object(j.jsx)("div",{className:"leaderboard__col",children:c}),Object(j.jsx)("div",{className:"leaderboard__col leaderboard__col_text_right",children:s(r)})]},t)}))})]})},L=(t(39),{easy:{img:t.p+"static/media/easy.448b1a60.svg",time:[1,0],layout:"4x4",rememberTime:[0,10]},medium:{img:t.p+"static/media/medium.57b2e366.svg",time:[2,20],layout:"8x8",rememberTime:[0,30]},hard:{img:t.p+"static/media/hard.b4764cca.svg",time:[3,50],layout:"14x10",rememberTime:[0,50]}});var P=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(i.b)(),t=p(L[e].rememberTime,1e3),r=Object(i.c)((function(e){return e.game})),n=r.time,s=r.isStart,l=r.isPlaying,o=Object(c.useState)(0),m=Object(d.a)(o,2),b=m[0],u=m[1];return Object(c.useEffect)((function(){s&&(t.start(),t.callbacks.finished=function(){return a({type:h})})}),[s,t,a]),Object(c.useEffect)((function(){if(l){var a=_(2,20);u(100/(a/n))}else if(s){var c=_.apply(void 0,Object(C.a)(L[e].rememberTime));u(100/(c/(c-t.leftTime)))}}),[n,e,l,s,t]),Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("div",{className:"loader__line ".concat(l?"loader__countdown":""),style:{width:"".concat(b,"%")}})})},D=(t(40),t(41),{android:t.p+"static/media/android.5cea2350.svg",acer:t.p+"static/media/acer.97b43230.svg",apple:t.p+"static/media/apple.e8c87215.svg",beats:t.p+"static/media/beats.338456d2.svg",hp:t.p+"static/media/hp.2435474a.svg",lenovo:t.p+"static/media/lenovo.025f4804.svg",nokia:t.p+"static/media/nokia.4daa5df2.svg",intel:t.p+"static/media/intel.e6451727.svg",dell:t.p+"static/media/dell.39467c58.svg",cisco:t.p+"static/media/cisco.20318700.svg",htc:t.p+"static/media/htc.74cbfad7.svg"});var A=function(e){var a=e.card,t=e.index,c=a.isFlipped,r=a.name;return Object(j.jsxs)("div",{id:"card-".concat(t),className:"card".concat(c?" card_flipped":""),children:[Object(j.jsx)("div",{className:"card__shirt"}),Object(j.jsx)("div",{className:"card__face",style:{backgroundImage:"url(".concat(D[r],")")}}),Object(j.jsx)("div",{className:"card__shadow"})]})},I="cards/pushData",R="cards/addToCompare",q="cards/flipCard";var M=function(e){var a=e.level,t=Object(i.c)((function(e){return e.cards})),r=Object(c.useRef)(null),n=Object(i.b)();return Object(c.useEffect)((function(){var e=r.current,a=function(e){var a=e.target.closest(".card");if(a){var t,c=a.id.split("-")[1];n((t=c,{type:q,payload:function(e){var a=Object(C.a)(e);return a[t].isFlipped=!a[t].isFlipped,a}}))}};return e.addEventListener("click",a),function(){return e.removeEventListener("click",a)}}),[n]),Object(j.jsx)("div",{className:"playground playground__level_".concat(a),ref:r,children:t.list.map((function(e,a){return Object(j.jsx)(A,{index:a,card:e},e.id)}))})};t(42),t(43);var F=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(c.useState)(""),t=Object(d.a)(a,2),r=t[0],n=t[1],s=Object(c.useState)(!0),o=Object(d.a)(s,2),b=o[0],u=o[1],_=Object(c.useState)(!1),p=Object(d.a)(_,2),h=p[0],f=p[1],g=Object(c.useState)(0),x=Object(d.a)(g,2),k=x[0],S=x[1],w=Object(c.useState)(""),E=Object(d.a)(w,2),C=E[0],T=E[1],P=Object(i.b)(),D=Object(c.useCallback)((function(e){var a=e.target.value,t=v(a),c=t.isCorrectlength,r=t.isCorrectSymbol;n(a),a.length>2&&f(!0),h&&(c()?r()?u(!0):(u(!1),T("Nickname contains incorrect symbols")):(u(!1),T("Length of nickname must contains 3-24 symbols")))}),[h]),A=Object(c.useCallback)((function(e){e.preventDefault();var a,t=v(r.trim()),c=t.isCorrectlength,n=t.isCorrectSymbol,s=t.isNotEmpty;f(!0),console.log(r,c(),n()),s()?c()&&n()&&s()?(u(!0),console.log("true?",c()&&n())):u(!1):(u(!1),T("Nickname is required")),b&&(console.log("true?",c()&&n()),P((a=r.trim(),localStorage.setItem("nickname",a),{type:N,payload:a})),P({type:y}),console.log("START"))}),[b,r,P]);return Object(c.useEffect)((function(){var a=1e3*L[e].rememberTime[1],t=O(a);S(t)}),[e]),Object(j.jsxs)("div",{className:"modal__wrapper",children:[Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("h4",{className:"modal__title",children:"Rules"}),Object(j.jsxs)("ol",{className:"modal__list",children:[Object(j.jsx)("li",{className:"modal__item",children:"Enter your nickname and start game. It will be used for saving your results."}),Object(j.jsxs)("li",{className:"modal__item",children:["You have"," ",Object(j.jsx)("b",{children:k})," ","seconds to remember all cards, before they are all roll over."]}),Object(j.jsx)("li",{className:"modal__item",children:"When the timer starts counting down, you need to find all pairs of the same cards."}),Object(j.jsx)("li",{className:"modal__item",children:"The game ends when the time is up. Your time will be saved on the leaderboard."})]})]}),Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("h4",{className:"modal__title",children:"Nickname"}),Object(j.jsxs)("form",{className:"modal__form",onSubmit:A,children:[Object(j.jsx)("input",{className:"modal__input".concat(b?"":" modal__input_invalid"),placeholder:"Enter your nickname",onChange:D,value:r,spellCheck:"false"}),Object(j.jsxs)("div",{className:"modal__button-wrapper",children:[Object(j.jsx)(l.b,{to:"/",children:Object(j.jsx)(m,{variant:"secondary",children:"Cancel"})}),Object(j.jsx)(m,{variant:"primary",type:"submit",children:"Continue"})]})]}),!b&&Object(j.jsx)("div",{className:"modal__container modal__container_absolute",children:Object(j.jsx)("p",{children:C})})]})]})},G=t.p+"static/media/game-over.910289ec.svg";var H=function(e){var a=e.score;return Object(j.jsxs)("div",{className:"modal__wrapper",children:[Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("img",{className:"modal__image",src:G,alt:"game-over"}),Object(j.jsxs)("p",{className:"modal__content",children:["Your score:"," ",Object(j.jsx)("span",{className:"modal__score",children:a})]})]}),Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("p",{className:"modal__text",children:"Let's play again?"}),Object(j.jsxs)("div",{className:"modal__button-wrapper",children:[Object(j.jsx)(m,{variant:"secondary",children:"Back"}),Object(j.jsx)(m,{variant:"primary",children:"Play"})]})]})]})};var X=function(){return Object(j.jsx)("div",{className:"modal__wrapper",children:Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("p",{className:"modal__text",children:"Are you sure you want to quit the game?"}),Object(j.jsxs)("div",{className:"modal__button-wrapper",children:[Object(j.jsx)(m,{variant:"danger",children:"Quit"}),Object(j.jsx)(m,{variant:"primary",children:"Continue"})]})]})})};function B(){var e=document.querySelector(".modal__pause-item"),a=document.querySelector(".modal__pause");e.style.display="block",a.classList.add("active")}function U(){var e=document.querySelector(".modal__pause-item"),a=document.querySelector(".modal__pause");e.style.display="none",a.classList.remove("active")}var Y=function(){return Object(j.jsx)("div",{className:"modal__wrapper",children:Object(j.jsxs)("div",{className:"modal__container",children:[Object(j.jsx)("div",{className:"modal__pause",onMouseOver:B,onMouseOut:U,onBlur:!0,onFocus:!0,children:Object(j.jsx)("span",{className:"modal__pause-item"})}),Object(j.jsxs)("p",{className:"modal__content",children:["Press"," ",Object(j.jsx)("div",{className:"modal__escape-wr",children:Object(j.jsx)("div",{className:"modal__escape",children:Object(j.jsx)("span",{className:"modal__text",children:"Esc"})})})," ","to continue"]})]})})};var J=function(e){var a=e.isLogin,t=e.isCancel,c=e.isGameOver,r=e.isPause,n=e.score;return a?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(F,{})}):t?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(X,{})}):c?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(H,{score:n})}):r?Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)(Y,{})}):void 0};var V=function(){var e=Object(i.c)((function(e){return e.gamemode})),a=Object(i.c)((function(e){return e.player.nickname})),t=Object(c.useState)(!1),r=Object(d.a)(t,2),n=r[0],s=r[1];return console.log("render"),Object(j.jsxs)(j.Fragment,{children:[!a&&Object(j.jsx)(J,{isLogin:!0}),Object(j.jsxs)("div",{className:"game",children:[Object(j.jsxs)("div",{className:"game__interface",children:[Object(j.jsx)(E,{}),Object(j.jsx)("div",{className:"game__leaderboard",children:Object(j.jsx)(T,{inGame:!0})}),Object(j.jsx)("div",{className:"game__button",children:Object(j.jsx)(m,{variant:"danger",clickHandler:function(){return s(!n)},children:"Surrender"})})]}),Object(j.jsx)("div",{className:"game__playground",children:Object(j.jsx)(M,{level:e})}),Object(j.jsx)("div",{className:"game__loader",children:Object(j.jsx)(P,{})})]})]})},z=t(2);t(45);var Q=function(e){var a=e.level,t=e.active,r=e.onActive,n=Object(c.useState)({}),s=Object(d.a)(n,2),i=s[0],l=s[1],o=Object(c.useState)(""),u=Object(d.a)(o,2),O=u[0],_=u[1];return Object(c.useEffect)((function(){l(Object(z.a)({},L[a])),_(i.time?b.apply(void 0,Object(C.a)(i.time)):"")}),[a,i.time,l]),Object(j.jsxs)("div",{className:"gamelevel",children:[Object(j.jsx)("div",{className:"gamelevel__image_wrapp",children:Object(j.jsx)("img",{className:"gamelevel__image".concat(t?" gamelevel__image_active":""),src:i.img,alt:a})}),Object(j.jsx)("div",{className:"gamelevel__info_wrapp",children:Object(j.jsxs)("h3",{className:"gamelevel__info",children:[Object(j.jsx)("span",{className:"gamelevel__name",children:a}),Object(j.jsx)("span",{className:"gamelevel__time",children:O})]})}),Object(j.jsx)("div",{className:"gamelevel__button_wrapp",children:Object(j.jsx)(m,{isCheckbox:!0,variant:"primary",checked:t,clickHandler:function(){return r(a)},children:i.layout})})]})},W=(t(46),"gamemode/change");var K=function(){var e=Object(i.c)((function(e){return e.leaderboard})),a=Object(i.c)((function(e){return e.gamemode})),t=Object(i.b)(),r=Object(c.useCallback)((function(e){t({type:W,payload:e})}),[t]);return Object(c.useEffect)((function(){t({type:S})}),[t]),Object(j.jsxs)("div",{className:"homepage",children:[Object(j.jsxs)("div",{className:"homepage__leaderboard-wrapper",children:[Object(j.jsx)("h1",{className:"homepage__title",children:"Leaderboard"}),Object(j.jsx)(T,{leaders:e.list,inGame:!1})]}),Object(j.jsx)("h3",{className:"homepage__subtitle",children:"Select the grid size"}),Object(j.jsxs)("div",{className:"homepage__level-wrapper",children:[Object(j.jsx)(Q,{level:"easy",active:"easy"===a,onActive:r}),Object(j.jsx)(Q,{level:"medium",active:"medium"===a,onActive:r}),Object(j.jsx)(Q,{level:"hard",active:"hard"===a,onActive:r})]}),Object(j.jsx)("div",{className:"homepage__button-wrapper",children:Object(j.jsx)(l.b,{to:"/game",children:Object(j.jsx)(m,{variant:"large",children:"Play"})})})]})};var Z=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(l.a,{basename:"/find-pair-game",children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{exact:!0,path:"/",children:Object(j.jsx)(K,{})}),Object(j.jsx)(o.a,{exact:!0,path:"/game",children:Object(j.jsx)(V,{})})]})})})},$=t(13),ee="leaderboard/loading",ae="leaderboard/loaded",te="leaderboard/error",ce="leaderboard/clearError",re="leaderboard/pushData",ne={list:Object(C.a)(new Array(50)).map((function(e,a){return{id:a,nickname:"Username ".concat(a),time:3e3+1e3*a}})),isLoading:!1,isLoaded:!1,isError:!1,errorMessage:null};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ee:return Object(z.a)(Object(z.a)({},e),{},{isLoading:!0,isLoaded:!1});case ae:return Object(z.a)(Object(z.a)({},e),{},{isLoading:!1,isLoaded:!0});case te:return Object(z.a)(Object(z.a)({},e),{},{isError:!0,errorMessage:a.payload});case ce:return Object(z.a)(Object(z.a)({},e),{},{isError:!1,errorMessage:null});case re:return Object(z.a)(Object(z.a)({},e),{},{list:a.payload});default:return e}};var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"easy",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case W:return a.payload;default:return e}},le={compare:[],list:Object(C.a)(new Array(16)).map((function(e,a){return{id:a,name:"apple",isFlipped:!1}}))};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case I:return Object(z.a)(Object(z.a)({},e),{},{list:a.payload});case q:return Object(z.a)(Object(z.a)({},e),{},{list:a.payload(e.list)});case R:return Object(z.a)(Object(z.a)({},e),{},{compare:Object(C.a)(a.payload(e.compare))});default:return e}},de={nickname:null,time:null};var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case N:return Object(z.a)(Object(z.a)({},e),{},{nickname:a.payload});case k:return Object(z.a)(Object(z.a)({},e),{},{time:a.payload});case S:return Object(z.a)(Object(z.a)({},e),{},{time:null});default:return e}},me={isStart:!1,isPlaying:!1,isPause:!1,isGameOver:!1,time:null};var be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0,t=a.type,c=a.payload;switch(t){case y:return Object(z.a)(Object(z.a)({},e),{},{isStart:!0});case h:return Object(z.a)(Object(z.a)({},e),{},{isStart:!0,isPlaying:!0,isPause:!1});case f:return Object(z.a)(Object(z.a)({},e),{},{isPlaying:!1,isPause:!0});case g:return Object(z.a)(Object(z.a)({},e),{},{isStart:!1,isGameOver:!0,isPlaying:!1});case x:return Object(z.a)(Object(z.a)({},e),{},{time:c});default:return e}},ue=Object($.b)({player:je,gamemode:ie,leaderboard:se,cards:oe,game:be}),Oe=Object($.c)(ue,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(i.a,{store:Oe,children:Object(j.jsx)(Z,{})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.c6470201.chunk.js.map