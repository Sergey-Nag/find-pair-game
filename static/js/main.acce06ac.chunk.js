(this["webpackJsonpfind-pair-game"]=this["webpackJsonpfind-pair-game"]||[]).push([[0],{31:function(e,a,t){},36:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){},44:function(e,a,t){},46:function(e,a,t){"use strict";t.r(a);var c=t(0),r=t.n(c),n=t(16),i=t.n(n),s=(t(31),t(5)),l=t(26),d=t(4),o=t(6),u=(t(36),t(1));var b=function(e){var a=e.children,t=e.clickHandler,c=e.variant,r=e.isCheckbox,n=e.checked,i=e.type;return Object(u.jsxs)("button",{className:"button button__".concat(c),type:i?"submit":"button",onClick:t,children:[r&&Object(u.jsxs)("div",{className:"button__box",children:[Object(u.jsx)("div",{className:"button__checkbox ".concat(n?"active":"")}),a]}),!r&&a]})},j=function(e,a){return"".concat(e<10?"0":"").concat(e,":").concat(a<10?"0":"").concat(a)},m=function(e){return new Date(e).getMinutes()},O=function(e){return new Date(e).getSeconds()},v=function(e,a){var t=new Date;return t.setTime(1e3*a+1e3*e*60),t.valueOf()},p=function(e,a){var t=Object(o.a)(e,2),r=t[0],n=t[1],i=Object(c.useRef)(null),s=Object(c.useState)(!1),l=Object(o.a)(s,2),d=l[0],u=l[1],b=Object(c.useState)(!1),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(c.useState)(!1),f=Object(o.a)(p,2),_=f[0],h=f[1],g=Object(c.useState)(!1),x=Object(o.a)(g,2),y=x[0],N=x[1],k=Object(c.useState)(v(r,n)),w=Object(o.a)(k,2),E=w[0],S=w[1],T=Object(c.useState)(E),C=Object(o.a)(T,2),L=C[0],P=C[1],D=Object(c.useState)({paused:null,finished:null}),A=Object(o.a)(D,1)[0];Object(c.useEffect)((function(){O(0===L)}),[L]);var H=function(e){N(!1),u(!0),e&&(S(v(e[0],e[1])),h(!0))},I=Object(c.useCallback)((function(){i.current||(A.beforeStart&&A.beforeStart(),i.current=setInterval((function(){P((function(e){return console.log("tick"),0===e?(H(),0):e-1e3}))}),a))}),[a,A]),M=Object(c.useCallback)((function(){i.current&&(clearInterval(i.current),i.current=null,N(!1),d||!A.paused||m||A.paused())}),[A,d,m]),R=Object(c.useCallback)((function(){P(E)}),[E]);return Object(c.useEffect)((function(){if(_&&(R(),h(!1)),d)return M(),void(A.finished&&m&&A.finished());y?I():M()}),[d,_,y,I,R,A,M,m]),{start:function(){u(!1),N(!0)},pause:function(){return N(!1)},stop:function(){return u(!0)},restart:H,leftTime:L,callbacks:A}},f="game/start",_="game/pause",h="game/gameOver",g="game/setTime",x="player/setNickname",y="player/setTime",N="player/clearScore",k=[2,20];var w=function(){var e,a=Object(s.c)((function(e){return e.player})),t=Object(s.c)((function(e){return e.game})),r=Object(c.useState)("--:--"),n=Object(o.a)(r,2),i=n[0],l=n[1],d=Object(s.b)(),b=p(k,1e3),f=b.start,h=b.pause,x=b.leftTime,N=b.callbacks;return Object(c.useEffect)((function(){N.finished=function(){console.log("finished"),0===x&&d({type:_})},N.paused=function(){console.log("paused")},t.isPlaying?f():h()}),[f,h,N,t.isPlaying,x,d]),Object(c.useEffect)((function(){d({type:g,payload:x}),d({type:y,payload:v.apply(void 0,k)-x})}),[x,d]),Object(c.useEffect)((function(){var e=m(t.time),a=O(t.time);l(j(e,a))}),[t]),Object(u.jsxs)("div",{className:"game__info",children:[Object(u.jsx)("span",{className:"game__nickname",children:null!==(e=a.nickname)&&void 0!==e?e:"..."}),Object(u.jsx)("span",{className:"game__time",children:i})]})},E=t(11);t(38);var S=function(e){var a=e.inGame,t=Object(s.c)((function(e){return e.leaderboard})),r=Object(s.c)((function(e){return e.player})),n=Object(c.useRef)(null),i=Object(c.useCallback)((function(e){var a=m(e),t=O(e);return j(a,t)}),[]),l=Object(c.useCallback)((function(){var e=Object(E.a)(t.list);return a&&e.push({id:"player",nickname:r.nickname,time:r.time}),e.sort((function(e,a){return e.time-a.time}))}),[t.list,a,r]);return Object(c.useEffect)((function(){if(a||!(r.time<1)){var e=n.current.clientHeight,t=n.current.querySelector(".leaderboard__row_player"),c=t.clientHeight,i=t.offsetTop;(function(e,a){var t=e.clientHeight;return e.offsetTop+t>a})(t,e-c)&&n.current.scrollTo(0,i-e+2*c)}}),[a,r]),Object(u.jsxs)("div",{className:"leaderboard",children:[Object(u.jsx)("div",{className:"leaderboard__head",children:Object(u.jsxs)("div",{className:"leaderboard__row",children:[Object(u.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"\u2116"}),Object(u.jsx)("div",{className:"leaderboard__col leaderboard__col_header",children:"Nickname"}),Object(u.jsx)("div",{className:"leaderboard__col leaderboard__col_header leaderboard__col_text_right",children:"Time"})]})}),Object(u.jsx)("div",{ref:n,className:"leaderboard__body ".concat(a?"":"leaderboard__body_top-players"),children:l().map((function(e){var t=e.id,c=e.nickname,r=e.time;return Object(u.jsxs)("div",{className:"leaderboard__row ".concat(a&&"player"===t?"leaderboard__row_player":""),children:[Object(u.jsx)("div",{className:"leaderboard__col ".concat(a&&"player"===t&&0===r?"leaderboard__col_no-counter":"")}),Object(u.jsx)("div",{className:"leaderboard__col",children:c}),Object(u.jsx)("div",{className:"leaderboard__col leaderboard__col_text_right",children:i(r)})]},t)}))})]})};t(39);var T=function(){var e=Object(s.c)((function(e){return e.game})).time,a=Object(c.useState)(0),t=Object(o.a)(a,2),r=t[0],n=t[1];return Object(c.useEffect)((function(){var a=v(2,20);n(100/(a/e))}),[e]),Object(u.jsx)("div",{className:"loader",children:Object(u.jsx)("div",{className:"loader__line loader__countdown",style:{width:"".concat(r,"%")}})})},C=(t(40),t(41),{android:t.p+"static/media/android.5cea2350.svg",acer:t.p+"static/media/acer.97b43230.svg",apple:t.p+"static/media/apple.e8c87215.svg",beats:t.p+"static/media/beats.338456d2.svg",hp:t.p+"static/media/hp.2435474a.svg",lenovo:t.p+"static/media/lenovo.025f4804.svg",nokia:t.p+"static/media/nokia.4daa5df2.svg",intel:t.p+"static/media/intel.e6451727.svg",dell:t.p+"static/media/dell.39467c58.svg",cisco:t.p+"static/media/cisco.20318700.svg",htc:t.p+"static/media/htc.74cbfad7.svg"});var L=function(e){var a=e.card,t=e.index,c=a.isFlipped,r=a.name;return Object(u.jsxs)("div",{id:"card-".concat(t),className:"card".concat(c?" card_flipped":""),children:[Object(u.jsx)("div",{className:"card__shirt"}),Object(u.jsx)("div",{className:"card__face",style:{backgroundImage:"url(".concat(C[r],")")}}),Object(u.jsx)("div",{className:"card__shadow"})]})},P="cards/pushData",D="cards/addToCompare",A="cards/flipCard";var H=function(e){var a=e.level,t=Object(s.c)((function(e){return e.cards})),r=Object(c.useRef)(null),n=Object(s.b)();return Object(c.useEffect)((function(){var e=r.current,a=function(e){var a=e.target.closest(".card");if(a){var t,c=a.id.split("-")[1];n((t=c,{type:A,payload:function(e){var a=Object(E.a)(e);return a[t].isFlipped=!a[t].isFlipped,a}}))}};return e.addEventListener("click",a),function(){return e.removeEventListener("click",a)}}),[n]),Object(u.jsx)("div",{className:"playground playground__level_".concat(a),ref:r,children:t.list.map((function(e,a){return Object(u.jsx)(L,{index:a,card:e},e.id)}))})};t(42);var I=function(){var e=Object(s.c)((function(e){return e.gamemode})),a=Object(s.b)(),t=Object(c.useState)(!1),r=Object(o.a)(t,2),n=r[0],i=r[1];return Object(c.useEffect)((function(){a({type:n?f:_}),a({type:x,payload:"Sergey"})}),[a,n]),console.log("render"),Object(u.jsxs)("div",{className:"game",children:[Object(u.jsxs)("div",{className:"game__interface",children:[Object(u.jsx)(w,{}),Object(u.jsx)("div",{className:"game__leaderboard",children:Object(u.jsx)(S,{inGame:!0})}),Object(u.jsx)("div",{className:"game__button",children:Object(u.jsx)(b,{variant:"danger",clickHandler:function(){return i(!n)},children:"Surrender"})})]}),Object(u.jsx)("div",{className:"game__playground",children:Object(u.jsx)(H,{level:e})}),Object(u.jsx)("div",{className:"game__loader",children:Object(u.jsx)(T,{width:"50"})})]})},M=t(2),R=(t(43),{easy:{img:t.p+"static/media/easy.448b1a60.svg",time:[1,0],layout:"4x4",remeberTime:[0,10]},medium:{img:t.p+"static/media/medium.57b2e366.svg",time:[2,20],layout:"8x8",remeberTime:[0,30]},hard:{img:t.p+"static/media/hard.b4764cca.svg",time:[3,50],layout:"14x10",remeberTime:[0,50]}});var F=function(e){var a=e.level,t=e.active,r=e.onActive,n=Object(c.useState)({}),i=Object(o.a)(n,2),s=i[0],l=i[1];return Object(c.useEffect)((function(){l(Object(M.a)({},R[a]))}),[a,l]),Object(u.jsxs)("div",{className:"gamelevel",children:[Object(u.jsx)("div",{className:"gamelevel__image_wrapp",children:Object(u.jsx)("img",{className:"gamelevel__image".concat(t?" gamelevel__image_active":""),src:s.img,alt:a})}),Object(u.jsx)("div",{className:"gamelevel__info_wrapp",children:Object(u.jsxs)("h3",{className:"gamelevel__info",children:[Object(u.jsx)("span",{className:"gamelevel__name",children:a}),Object(u.jsx)("span",{className:"gamelevel__time",children:s.time})]})}),Object(u.jsx)("div",{className:"gamelevel__button_wrapp",children:Object(u.jsx)(b,{isCheckbox:!0,variant:"primary",checked:t,clickHandler:function(){return r(a)},children:s.layout})})]})},G=(t(44),"gamemode/change");var X=function(){var e=Object(s.c)((function(e){return e.leaderboard})),a=Object(s.c)((function(e){return e.gamemode})),t=Object(s.b)(),r=Object(c.useCallback)((function(e){t({type:G,payload:e})}),[t]);return Object(u.jsxs)("div",{className:"homepage",children:[Object(u.jsxs)("div",{className:"homepage__leaderboard-wrapper",children:[Object(u.jsx)("h1",{className:"homepage__title",children:"Leaderboard"}),Object(u.jsx)(S,{leaders:e.list})]}),Object(u.jsx)("h3",{className:"homepage__subtitle",children:"Select the grid size"}),Object(u.jsxs)("div",{className:"homepage__level-wrapper",children:[Object(u.jsx)(F,{level:"easy",active:"easy"===a,onActive:r}),Object(u.jsx)(F,{level:"medium",active:"medium"===a,onActive:r}),Object(u.jsx)(F,{level:"hard",active:"hard"===a,onActive:r})]}),Object(u.jsx)("div",{className:"homepage__button-wrapper",children:Object(u.jsx)(b,{variant:"large",children:"Play"})})]})};var U=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(l.a,{basename:"/find-pair-game",children:Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{exact:!0,path:"/",children:Object(u.jsx)(X,{})}),Object(u.jsx)(d.a,{exact:!0,path:"/game",children:Object(u.jsx)(I,{})})]})})})},J=t(13),V="leaderboard/loading",q="leaderboard/loaded",z="leaderboard/error",B="leaderboard/clearError",K="leaderboard/pushData",Q={list:Object(E.a)(new Array(50)).map((function(e,a){return{id:a,nickname:"Username ".concat(a),time:3e3+1e3*a}})),isLoading:!1,isLoaded:!1,isError:!1,errorMessage:null};var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case V:return Object(M.a)(Object(M.a)({},e),{},{isLoading:!0,isLoaded:!1});case q:return Object(M.a)(Object(M.a)({},e),{},{isLoading:!1,isLoaded:!0});case z:return Object(M.a)(Object(M.a)({},e),{},{isError:!0,errorMessage:a.payload});case B:return Object(M.a)(Object(M.a)({},e),{},{isError:!1,errorMessage:null});case K:return Object(M.a)(Object(M.a)({},e),{},{list:a.payload});default:return e}};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"easy",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case G:return a.payload;default:return e}},Z={compare:[],list:Object(E.a)(new Array(16)).map((function(e,a){return{id:a,name:"apple",isFlipped:!1}}))};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case P:return Object(M.a)(Object(M.a)({},e),{},{list:a.payload});case A:return Object(M.a)(Object(M.a)({},e),{},{list:a.payload(e.list)});case D:return Object(M.a)(Object(M.a)({},e),{},{compare:Object(E.a)(a.payload(e.compare))});default:return e}},ee={nickname:null,time:null};var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case x:return Object(M.a)(Object(M.a)({},e),{},{nickname:a.payload});case y:return Object(M.a)(Object(M.a)({},e),{},{time:a.payload});case N:return Object(M.a)(Object(M.a)({},e),{},{time:null});default:return e}},te={isPlaying:!1,isPause:!1,isGameOver:!1,time:null};var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,a=arguments.length>1?arguments[1]:void 0,t=a.type,c=a.payload;switch(t){case f:return Object(M.a)(Object(M.a)({},e),{},{isPlaying:!0,isPause:!1});case _:return Object(M.a)(Object(M.a)({},e),{},{isPlaying:!1,isPause:!0});case h:return Object(M.a)(Object(M.a)({},e),{},{isGameOver:!0,isPlaying:!1});case g:return Object(M.a)(Object(M.a)({},e),{},{time:c});default:return e}},re=Object(J.b)({player:ae,gamemode:Y,leaderboard:W,cards:$,game:ce}),ne=Object(J.c)(re,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(s.a,{store:ne,children:Object(u.jsx)(U,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.acce06ac.chunk.js.map